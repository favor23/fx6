<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 
<mapper namespace="CampaignMapper">
	<insert id="campaignWrite">
		insert into campaign(campaign_num) values(campaign_seq.nextval)
	</insert>
	<select id="numSelect" resultType="java.lang.Integer">
		select last_number from user_sequences where sequence_name=upper('campaign_seq')
	</select>
	<update id="campaignComplete" parameterType="com.choa.campaign.CampaignDTO">
		update campaign set id=#{id}, campaign_title=#{campaign_title}, goal_price=#{goal_price}, period=#{period}, campaign_end=#{campaign_end}, campaign_img=#{campaign_img}, simple_story=#{simple_story}, story=#{story}, main_video=#{main_video}, option_msg=#{option_msg}, bank=#{bank}, bank_account=#{bank_account}, register_name=#{register_name}, register_phone=#{register_phone}, register_email=#{register_email}, permission='unapproved' where campaign_num=#{campaign_num}
	</update>
</mapper>