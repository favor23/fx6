<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="WorkMapper"> 
 	<select id="selectList" resultType="com.choa.admin.work.WorkDTO">
		select * from 
		(select rownum r, m.* from 
		(select * from work order by num desc) m)
	</select>
	
	<select id="selectOne" resultType="com.choa.admin.work.WorkDTO" parameterType="com.choa.admin.work.WorkDTO">
		select * from work where num=#{num}
	</select>
	
	<insert id="insert" parameterType="com.choa.admin.work.WorkDTO">
		 insert into work values(work_seq.nextval,#{id},#{name},#{begin},#{end},#{persons},#{progress},#{iconcls},#{offer_id},#{department},#{position})
	</insert>
	
	<update id="update" parameterType="com.choa.admin.work.WorkDTO">
		UPDATE work set id=#{id}, name=#{name},begin=#{begin}, end=#{end},persons=#{persons},progress=#{progress}, iconcls=#{iconcls} where num=#{num} and offer_id=#{offer_id}
	</update>
	
	<update id="update_pro" parameterType="com.choa.admin.work.WorkDTO">
		UPDATE work set progress=#{progress} where num=#{num} and id=#{offer_id}
	</update>
	
	<delete id="delete" parameterType="com.choa.admin.work.WorkDTO">
		DELETE FROM work WHERE num=#{num} and offer_id=#{offer_id}
	</delete>
	
	
	
 </mapper> 